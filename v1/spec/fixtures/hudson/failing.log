Started by user anonymous
Building on master in workspace /var/lib/jenkins/jobs/michal/workspace
Checkout:workspace / /var/lib/jenkins/jobs/michal/workspace - hudson.remoting.LocalChannel@2551f563
Using strategy: Default
Last Built Revision: Revision 6b3648b0641dd15bf3542c6c60f8a1999c868eb6 (origin/deadlocks)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@github.com:3scale/system.git
Commencing build of Revision 6b3648b0641dd15bf3542c6c60f8a1999c868eb6 (origin/deadlocks)
Checking out Revision 6b3648b0641dd15bf3542c6c60f8a1999c868eb6 (origin/deadlocks)
[workspace] $ /bin/sh -xe /tmp/hudson5091136399658819969.sh
+ bash -l -c RAILS_ENV=test ~/.rvm/bin/ree-1.8.7-2012.01 ~/.rvm/gems/ree-1.8.7-2012.01/bin/bundle install && DISPLAY=:99.0 ~/.rvm/bin/ree-1.8.7-2012.01 ~/.rvm/gems/ree-1.8.7-2012.01/bin/bundle exec ~/.rvm/bin/rake-ree-1.8.7-2012.01 integrate
Using rake (0.9.2.2) 
Using 3scale_core (0.4.4) from git@github.com:3scale/core.git (at 0.4.4) 
Using RedCloth (4.2.9) 
Using activesupport (2.3.14) 
Using rack (1.1.2) 
Using actionpack (2.3.14) 
Using actionmailer (2.3.14) 
Using activerecord (2.3.14) 
Using activeresource (2.3.14) 
Using rails (2.3.14) 
Using acts-as-taggable-on (2.1.1) 
Using acts_as_audited (1.1.1) 
Using acts_as_versioned (0.2.3) 
Using addressable (2.2.8) 
Using after_commit (1.0.10) 
Using builder (3.1.4) 
Using connection_pool (0.9.2) 
Using girl_friday (0.10.0) 
Using airbrake (3.1.6) 
Using crack (0.1.8) 
Using httparty (0.7.7) 
Using json (1.7.5) 
Using nokogiri (1.5.5) 
Using uuidtools (2.1.3) 
Using aws-sdk (1.5.7) 
Using braintree (2.10.3) 
Using uniform_notifier (1.1.0) 
Using bullet (4.2.0) 
Using cancan (1.4.1) 
Using highline (1.6.13) 
Using net-ssh (2.5.2) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.8.0) 
Using capistrano-ext (1.2.1) 
Using mime-types (1.19) 
Using rack-test (0.6.1) 
Using ffi (1.1.5) 
Using childprocess (0.3.5) 
Using libwebsocket (0.1.5) 
Using multi_json (1.3.6) 
Using rubyzip (0.9.9) 
Using selenium-webdriver (2.25.0) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using capybara-webkit (0.12.1) 
Using chronic (0.6.7) 
Using numerizer (0.1.1) 
Using chronic_duration (0.9.6) 
Using chunky_png (1.2.6) 
Using cocaine (0.2.1) 
Using coderay (1.0.8) 
Using colored (1.2) 
Using columnize (0.3.6) 
Using fssm (0.2.9) 
Using sass (3.2.1) 
Using compass (0.12.2) 
Using compass-rails (1.0.3) 
Using diff-lcs (1.1.3) 
Using gherkin (2.4.21) 
Using term-ansicolor (1.0.7) 
Using cucumber (0.10.7) 
Using cucumber-rails (0.3.2) 
Using daemons (1.0.10) 
Using database_cleaner (0.8.0) 
Using unf_ext (0.0.5) 
Using unf (0.0.5) 
Using domain_name (0.5.3) 
Using i18n (0.4.2) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using rspec-core (2.0.1) 
Using rspec-expectations (2.0.1) 
Using rspec-mocks (2.0.1) 
Using rspec (2.0.1) 
Using email_spec (1.2.1) 
Using erubis (2.7.0) 
Using eventmachine (0.12.10) 
Using factory_girl (1.2.4) 
Using fakefs (0.3.2) 
Using faker (0.3.1) 
Using fakeweb (1.3.0) 
Using fastercsv (1.5.5) 
Using formtastic (1.2.5) 
Using gem_plugin (0.2.3) 
Using geokit (1.6.5) 
Using gruff (0.3.6) 
Using has_scope (0.5.1) 
Using headless (0.2.2) 
Using hike (1.2.1) 
Using hiredis (0.4.5) 
Using htmlentities (4.3.1) 
Using httpclient (2.2.7) 
Using responders (0.4.8) 
Using inherited_resources (1.0.6) 
Using launchy (2.1.0) 
Using rbx-require-relative (0.0.9) 
Using linecache (0.46) 
Using liquid (2.3.0) 
Using liquidizer (0.6.0) from git://github.com/mikz/liquidizer.git (at master) 
Using machinist (1.0.6) 
Using net-http-digest_auth (1.2.1) 
Using net-http-persistent (2.7) 
Using ntlm-http (0.1.1) 
Using webrobots (0.0.13) 
Using mechanize (2.5.1) 
Using metaclass (0.0.1) 
Using method_source (0.8.1) 
Using minitest (4.1.0) 
Using mocha (0.12.7) 
Using mongrel (1.2.0.pre2) 
Using mysql2 (0.2.18) 
Using newrelic_rpm (3.5.0.1) 
Using redis (2.1.1) 
Using newrelic-redis (1.3.2) 
Using paperclip (2.7.0) 
Using paperclip-meta (0.4.2) 
Using paperclip-storage-tmp (0.0.4) 
Using parallel (0.5.17) 
Using parallel_tests (0.6.20) 
Using prawn-core (0.5.1) 
Using prawn-format (0.2.1) 
Using prawn-layout (0.2.1) 
Using prawn (0.5.1) 
Using slop (3.3.3) 
Using pry (0.9.10) 
Using yard (0.8.2.1) 
Using pry-doc (0.4.4) 
Using pry-nav (0.2.2) 
Using rack-rest_api_versioning (0.0.2) from git://github.com/3scale/rack-rest_api_versioning.git (at master) 
Using rdoc (2.4.3) 
Using recaptcha (0.3.4) 
Using redcarpet (2.1.1) 
Using redis-namespace (1.1.0) 
Using tilt (1.3.3) 
Using sinatra (1.2.8) 
Using vegas (0.1.11) 
Using resque (1.22.0) 
Using tzinfo (0.3.33) 
Using rufus-scheduler (2.0.17) 
Using resque-scheduler (1.9.9) 
Using resque-retry (0.2.2) 
Using resque_unit (0.4.4) 
Using rest-client (1.6.7) 
Using riddle (1.5.3) 
Using rmagick (2.12.2) 
Using rpm_contrib (2.1.11) 
Using rspec-rails (2.0.1) 
Using ruby-debug-base (0.10.4) 
Using ruby-debug (0.10.4) 
Using ruby-prof (0.11.2) 
Using ruby18_source_location (0.2) 
Using sanitize_email (0.3.7) 
Using shoulda (2.11.3) 
Using sprockets (2.4.5) 
Using state_machine (1.1.2) 
Using system_timer (1.2.4) 
Using thin (1.2.11) 
Using thinking-sphinx (1.4.13) 
Using timecop (0.3.5) 
Using ts-datetime-delta (1.0.3) 
Using whenever (0.7.0) 
Using will_paginate (2.3.16) 
Using bundler (1.0.22) 
[32mYour bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.[0m
** Erubis 2.7.0
-- create_table("accounts", {:force=>true})
   -> 0.0210s
-- add_index("accounts", ["default_service_id"], {:name=>"index_accounts_on_default_service_id"})
   -> 0.0043s
-- add_index("accounts", ["domain"], {:name=>"index_accounts_on_domain"})
   -> 0.0041s
-- add_index("accounts", ["master"], {:unique=>true, :name=>"index_accounts_on_master"})
   -> 0.0044s
-- add_index("accounts", ["provider_account_id"], {:name=>"index_accounts_on_provider_account_id"})
   -> 0.0046s
-- add_index("accounts", ["self_domain"], {:name=>"index_accounts_on_self_domain"})
   -> 0.0047s
-- create_table("alerts", {:force=>true})
   -> 0.0020s
-- create_table("api_docs_services", {:force=>true})
   -> 0.0021s
-- create_table("application_keys", {:force=>true})
   -> 0.0018s
-- add_index("application_keys", ["application_id", "value"], {:unique=>true, :name=>"index_application_keys_on_application_id_and_value"})
   -> 0.0026s
-- create_table("audits", {:force=>true})
   -> 0.0020s
-- add_index("audits", ["auditable_id", "auditable_type"], {:name=>"auditable_index"})
   -> 0.0025s
-- add_index("audits", ["created_at"], {:name=>"index_audits_on_created_at"})
   -> 0.0029s
-- add_index("audits", ["user_id", "user_type"], {:name=>"user_index"})
   -> 0.0029s
-- create_table("billing_strategies", {:force=>true})
   -> 0.0022s
-- add_index("billing_strategies", ["account_id"], {:name=>"index_billing_strategies_on_account_id"})
   -> 0.0026s
-- create_table("categories", {:force=>true})
   -> 0.0019s
-- add_index("categories", ["account_id"], {:name=>"index_categories_on_account_id"})
   -> 0.0025s
-- create_table("category_types", {:force=>true})
   -> 0.0017s
-- add_index("category_types", ["account_id"], {:name=>"index_category_types_on_account_id"})
   -> 0.0024s
-- create_table("cinstances", {:force=>true})
   -> 0.0030s
-- add_index("cinstances", ["application_id"], {:name=>"index_cinstances_on_application_id"})
   -> 0.0028s
-- add_index("cinstances", ["plan_id"], {:name=>"fk_ct_contract_id"})
   -> 0.0029s
-- add_index("cinstances", ["user_account_id"], {:name=>"fk_ct_user_account_id"})
   -> 0.0030s
-- add_index("cinstances", ["user_key"], {:length=>{"user_key"=>255}, :name=>"index_cinstances_on_user_key"})
   -> 0.0032s
-- create_table("cms_files", {:force=>true})
   -> 0.0021s
-- add_index("cms_files", ["provider_id", "path"], {:name=>"index_cms_files_on_provider_id_and_path"})
   -> 0.0025s
-- add_index("cms_files", ["section_id"], {:name=>"index_cms_files_on_section_id"})
   -> 0.0028s
-- create_table("cms_group_sections", {:force=>true})
   -> 0.0017s
-- create_table("cms_groups", {:force=>true})
   -> 0.0018s
-- create_table("cms_permissions", {:force=>true})
   -> 0.0018s
-- create_table("cms_redirects", {:force=>true})
   -> 0.0019s
-- add_index("cms_redirects", ["provider_id", "source"], {:name=>"index_cms_redirects_on_provider_id_and_source"})
   -> 0.0025s
-- create_table("cms_sections", {:force=>true})
   -> 0.0020s
-- add_index("cms_sections", ["parent_id"], {:name=>"index_cms_sections_on_parent_id"})
   -> 0.0024s
-- add_index("cms_sections", ["provider_id"], {:name=>"index_cms_sections_on_provider_id"})
   -> 0.0026s
-- create_table("cms_templates", {:force=>true})
   -> 0.0027s
-- add_index("cms_templates", ["provider_id", "path"], {:name=>"index_cms_templates_on_provider_id_and_path"})
   -> 0.0027s
-- add_index("cms_templates", ["provider_id", "system_name"], {:name=>"index_cms_templates_on_provider_id_and_system_name"})
   -> 0.0028s
-- add_index("cms_templates", ["section_id"], {:name=>"index_cms_templates_on_section_id"})
   -> 0.0031s
-- create_table("cms_templates_versions", {:force=>true})
   -> 0.0028s
-- create_table("configuration_values", {:force=>true})
   -> 0.0019s
-- add_index("configuration_values", ["configurable_id", "configurable_type", "name"], {:unique=>true, :name=>"index_on_configurable_and_name"})
   -> 0.0024s
-- add_index("configuration_values", ["configurable_id", "configurable_type"], {:name=>"index_on_configurable"})
   -> 0.0027s
-- create_table("countries", {:force=>true})
   -> 0.0020s
-- add_index("countries", ["code"], {:name=>"index_countries_on_code"})
   -> 0.0024s
-- create_table("end_user_plans", {:force=>true})
   -> 0.0018s
-- create_table("features", {:force=>true})
   -> 0.0022s
-- add_index("features", ["featurable_type", "featurable_id"], {:name=>"index_features_on_featurable_type_and_featurable_id"})
   -> 0.0026s
-- add_index("features", ["featurable_type"], {:name=>"index_features_on_featurable_type"})
   -> 0.0027s
-- add_index("features", ["scope"], {:name=>"index_features_on_scope"})
   -> 0.0028s
-- add_index("features", ["system_name"], {:name=>"index_features_on_system_name"})
   -> 0.0031s
-- create_table("features_plans", {:force=>true, :id=>false})
   -> 0.0017s
-- add_index("features_plans", ["plan_id", "feature_id"], {:name=>"index_features_plans_on_plan_id_and_feature_id"})
   -> 0.0023s
-- create_table("fields_definitions", {:force=>true})
   -> 0.0024s
-- add_index("fields_definitions", ["account_id"], {:name=>"index_fields_definitions_on_account_id"})
   -> 0.0026s
-- create_table("forums", {:force=>true})
   -> 0.0022s
-- add_index("forums", ["permalink"], {:name=>"index_forums_on_site_id_and_permalink"})
   -> 0.0025s
-- add_index("forums", ["position"], {:name=>"index_forums_on_position_and_site_id"})
   -> 0.0027s
-- create_table("invitations", {:force=>true})
   -> 0.0022s
-- create_table("invoices", {:force=>true})
   -> 0.0026s
-- add_index("invoices", ["provider_account_id", "buyer_account_id"], {:name=>"index_invoices_on_provider_account_id_and_buyer_account_id"})
   -> 0.0026s
-- add_index("invoices", ["provider_account_id"], {:name=>"index_invoices_on_provider_account_id"})
   -> 0.0028s
-- create_table("legal_term_acceptances", {:force=>true})
   -> 0.0021s
-- add_index("legal_term_acceptances", ["account_id"], {:name=>"index_legal_term_acceptances_on_account_id"})
   -> 0.0025s
-- create_table("legal_term_bindings", {:force=>true})
   -> 0.0020s
-- create_table("legal_term_versions", {:force=>true})
   -> 0.0024s
-- create_table("legal_terms", {:force=>true})
   -> 0.0025s
-- add_index("legal_terms", ["account_id"], {:name=>"index_legal_terms_on_account_id"})
   -> 0.0027s
-- create_table("line_items", {:force=>true})
   -> 0.0025s
-- add_index("line_items", ["invoice_id"], {:name=>"index_line_items_on_invoice_id"})
   -> 0.0026s
-- create_table("log_entries", {:force=>true})
   -> 0.0021s
-- add_index("log_entries", ["provider_id"], {:name=>"index_log_entries_on_provider_id"})
   -> 0.0025s
-- create_table("mail_dispatch_rules", {:force=>true})
   -> 0.0021s
-- create_table("member_permissions", {:force=>true})
   -> 0.0020s
-- create_table("message_recipients", {:force=>true})
   -> 0.0023s
-- add_index("message_recipients", ["message_id", "kind", "position"], {:unique=>true, :name=>"index_message_recipients_on_message_id_and_kind_and_position"})
   -> 0.0025s
-- add_index("message_recipients", ["receiver_id"], {:name=>"idx_receiver_id"})
   -> 0.0027s
-- create_table("messages", {:force=>true})
   -> 0.0025s
-- create_table("metrics", {:force=>true})
   -> 0.0023s
-- add_index("metrics", ["service_id"], {:name=>"index_metrics_on_service_id"})
   -> 0.0025s
-- create_table("moderatorships", {:force=>true})
   -> 0.0020s
-- create_table("payment_transactions", {:force=>true})
   -> 0.0025s
-- create_table("plan_metrics", {:force=>true})
   -> 0.0023s
-- create_table("plans", {:force=>true})
   -> 0.0034s
-- add_index("plans", ["issuer_id"], {:name=>"fk_contracts_service_id"})
   -> 0.0028s
-- create_table("posts", {:force=>true})
   -> 0.0025s
-- add_index("posts", ["created_at", "forum_id"], {:name=>"index_posts_on_forum_id"})
   -> 0.0026s
-- add_index("posts", ["created_at", "topic_id"], {:name=>"index_posts_on_topic_id"})
   -> 0.0027s
-- add_index("posts", ["created_at", "user_id"], {:name=>"index_posts_on_user_id"})
   -> 0.0029s
-- create_table("pricing_rules", {:force=>true})
   -> 0.0024s
-- create_table("profiles", {:force=>true})
   -> 0.0031s
-- add_index("profiles", ["account_id"], {:name=>"fk_account_id"})
   -> 0.0028s
-- create_table("proxies", {:force=>true})
   -> 0.0039s
-- create_table("proxy_logs", {:force=>true})
   -> 0.0022s
-- create_table("proxy_rules", {:force=>true})
   -> 0.0022s
-- create_table("referrer_filters", {:force=>true})
   -> 0.0021s
-- add_index("referrer_filters", ["application_id"], {:name=>"index_referrer_filters_on_application_id"})
   -> 0.0026s
-- create_table("services", {:force=>true})
   -> 0.0048s
-- add_index("services", ["account_id"], {:name=>"idx_account_id"})
   -> 0.0033s
-- add_index("services", ["system_name", "account_id", "deleted_at"], {:unique=>true, :name=>"index_services_on_system_name_and_account_id_and_deleted_at"})
   -> 0.0035s
-- create_table("settings", {:force=>true})
   -> 0.0078s
-- add_index("settings", ["account_id"], {:unique=>true, :name=>"index_settings_on_account_id"})
   -> 0.0041s
-- create_table("slugs", {:force=>true})
   -> 0.0021s
-- add_index("slugs", ["name", "sluggable_type", "sequence"], {:name=>"index_slugs_on_n_s_and_s"})
   -> 0.0025s
-- add_index("slugs", ["sluggable_id"], {:name=>"index_slugs_on_sluggable_id"})
   -> 0.0027s
-- create_table("system_operations", {:force=>true})
   -> 0.0022s
-- create_table("taggings", {:force=>true})
   -> 0.0022s
-- add_index("taggings", ["tag_id"], {:name=>"index_taggings_on_tag_id"})
   -> 0.0025s
-- add_index("taggings", ["taggable_id", "taggable_type", "context"], {:name=>"index_taggings_on_taggable_id_and_taggable_type_and_context"})
   -> 0.0028s
-- create_table("tags", {:force=>true})
   -> 0.0020s
-- add_index("tags", ["account_id"], {:name=>"index_tags_on_account_id"})
   -> 0.0023s
-- create_table("topic_categories", {:force=>true})
   -> 0.0022s
-- add_index("topic_categories", ["forum_id"], {:name=>"index_topic_categories_on_forum_id"})
   -> 0.0024s
-- create_table("topics", {:force=>true})
   -> 0.0028s
-- add_index("topics", ["forum_id", "permalink"], {:name=>"index_topics_on_forum_id_and_permalink"})
   -> 0.0026s
-- add_index("topics", ["last_updated_at", "forum_id"], {:name=>"index_topics_on_forum_id_and_last_updated_at"})
   -> 0.0029s
-- add_index("topics", ["sticky", "last_updated_at", "forum_id"], {:name=>"index_topics_on_sticky_and_last_updated_at"})
   -> 0.0031s
-- create_table("usage_limits", {:force=>true})
   -> 0.0023s
-- create_table("user_topics", {:force=>true})
   -> 0.0021s
-- create_table("users", {:force=>true})
   -> 0.0039s
-- add_index("users", ["account_id"], {:name=>"idx_account_id"})
   -> 0.0029s
-- add_index("users", ["email"], {:name=>"index_users_on_email"})
   -> 0.0030s
-- add_index("users", ["posts_count"], {:name=>"index_site_users_on_posts_count"})
   -> 0.0033s
-- add_index("users", ["username"], {:name=>"index_users_on_login"})
   -> 0.0034s
-- create_table("web_hooks", {:force=>true})
   -> 0.0036s
-- initialize_schema_migrations_table()
   -> 0.0050s
-- assume_migrated_upto_version(20121108165539, "db/migrate")
   -> 0.2664s
********* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
* Erubis 2.7.0
********* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
Loaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.00028 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
oaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.00023 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
oaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.000235 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
Loaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.000181 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
* Erubis 2.7.0
Loaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.000199 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
oaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.000214 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
* Erubis 2.7.0
Loaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.000189 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
oaded suite /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/bin/rake
Started

Finished in 0.00023 seconds.

0 tests, 0 assertions, 0 failures, 0 errors
** Erubis 2.7.0
8 processes for 195 tests, ~ 24 tests per process
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
**[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
**[WARN] S3 storage is not enabled.
**[WARN] S3 storage is not enabled.
**[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
 /var/lib/jenkins/jobs/michal/workspace/test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
R/var/lib/jenkins/jobs/michal/workspace/test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
 * DEFERRED: When new cinstance is created a message should contain link to cinstance. 
  * DEFERRED: When cinstance changes a plan a message should contain old plan name. 
  * DEFERRED: When pending cinstance is accepted a message should contain link to cinstance details. 
Run options: --seed 33421

# Running tests:

.....

Finished tests in 0.003804s, 1314.4059 tests/s, 2365.9306 assertions/s.

5 tests, 9 assertions, 0 failures, 0 errors, 0 skips
L./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
/var/lib/jenkins/jobs/michal/workspace/test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
 * Erubis 2.7.0
L/var/lib/jenkins/jobs/michal/workspace/test/unit/portlets/../../test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
 /var/lib/jenkins/jobs/michal/workspace/test/unit/portlets/../../test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L* Erubis 2.7.0
  * DEFERRED: Cinstance::Trial should remaining_trial_period_days returns remaining days of trial period. 
  * DEFERRED: Existing user should send lost password email on :generate_lost_password_token!. 
L * DEFERRED: on :destroy should destroy pricing_rules. 
  * DEFERRED: on :destroy should destroy usage_limits. 
  * DEFERRED: on :destroy should not destroy metric if there are some reports. 
L* Erubis 2.7.0
L * DEFERRED: A Plan instance copy should clone state. 
Run options: --seed 38557

# Running tests:

.

Finished tests in 0.001371s, 729.3946 tests/s, 729.3946 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Loaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.un options: --seed 42155

# Running tests:

.

Finished tests in 0.001426s, 701.2623 tests/s, 1402.5245 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips
Loaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................F...............................................................................................................................................................................................................................................
Finished in 133.304176 seconds.

172 tests, 374 assertions, 0 failures, 0 errors
............................................................................................
Finished in 151.189327 seconds.

  1) Failure:
test_send_email_when_new_user_is_created(UserObserverTest) [test/unit/observers/user_observer_test.rb:10]:
not all expectations were satisfied
unsatisfied expectations:
- expected exactly once, not yet invoked: UserMailer.deliver_signup_notification(any_parameters)

174 tests, 429 assertions, 1 failures, 0 errors
............... .. * WARNING: Test: <test_index_presenter_as_json(SearchPresentersTest)> is pending.
..................................................................................
Finished in 163.32397 seconds.

217 tests, 341 assertions, 0 failures, 0 errors
.........  * WARNING: Test: <test_two_users_of_two_provider_accounts_need_unique_emails_when_provider_has_no_self_domain(UserTest)> is pending.
.......
Finished in 169.553646 seconds.

186 tests, 340 assertions, 0 failures, 0 errors
....................................................................................................................................................................................................................................................................
Finished in 219.991885 seconds.

175 tests, 355 assertions, 0 failures, 0 errors
........./var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/activerecord-2.3.14/lib/active_record/associations/association_proxy.rb:215: warning: default `to_a' will be obsolete
............................
Finished in 227.690668 seconds.

221 tests, 473 assertions, 0 failures, 0 errors
..........
Finished in 228.006031 seconds.

229 tests, 345 assertions, 0 failures, 0 errors
..................
Finished in 238.066347 seconds.

189 tests, 305 assertions, 0 failures, 0 errors
Tests Failed

2974 assertions, 0 errors, 1 failure, 0 skips, 1570 tests

Took 254.16452 seconds
** Erubis 2.7.0
8 processes for 75 tests, ~ 9 tests per process
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
**[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
******[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L/var/lib/jenkins/jobs/michal/workspace/test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L* Erubis 2.7.0
L./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
Loaded suite -e
Started
.....
Finished in 0.0674 seconds.

5 tests, 17 assertions, 0 failures, 0 errors
oaded suite -e
Started
.......oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
...oaded suite -e
Started
....oaded suite -e
Started
.oaded suite -e
Started
.................................................................................................................................
Finished in 8.036238 seconds.

42 tests, 158 assertions, 0 failures, 0 errors
..............DEPRECATION WARNING: logging in as provider on buyer side. (called from setup at /var/lib/jenkins/jobs/michal/workspace/test/functional/buyer/groups_controller_test.rb:9)
..........
Finished in 12.343549 seconds.

34 tests, 106 assertions, 0 failures, 0 errors
...............
Finished in 13.600978 seconds.

36 tests, 119 assertions, 0 failures, 0 errors
DEPRECATION WARNING: logging in as provider on buyer side. (called from setup at /var/lib/jenkins/jobs/michal/workspace/test/functional/buyer/groups_controller_test.rb:9)
..................................................
Finished in 18.340327 seconds.

36 tests, 112 assertions, 0 failures, 0 errors
...............................
Finished in 22.756162 seconds.

44 tests, 156 assertions, 0 failures, 0 errors
....
Finished in 25.483675 seconds.

37 tests, 129 assertions, 0 failures, 0 errors
...........
Finished in 30.417838 seconds.

52 tests, 139 assertions, 0 failures, 0 errors

936 assertions, 0 errors, 0 failures, 286 tests

Took 46.733065 seconds
** Erubis 2.7.0
8 processes for 58 tests, ~ 7 tests per process
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
*[WARN] S3 storage is not enabled.
*[WARN] S3 storage is not enabled.
****[WARN] S3 storage is not enabled.
*[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
*[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
 * Erubis 2.7.0
L./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
./test/test_helpers/fake_web.rb:3: warning: already initialized constant CONTENT_TYPE
* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
L* Erubis 2.7.0
Loaded suite -e
Started
.oaded suite -e
Started
. * DEFERRED: Mandatory keys: service has mandatory_app_key should create not be able to delete the last key. 
Loaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
.oaded suite -e
Started
... . ..... * WARNING: Test: <test_disable_non-existing_feature(Admin::Api::ApplicationPlanFeaturesTest)> is pending.
.  * WARNING: Test: <test_disable_non-existing_feature(Admin::Api::AccountPlanFeaturesTest)> is pending.
. ..... * WARNING: Test: <test_enable_existing_feature(Admin::Api::ApplicationPlanFeaturesTest)> is pending.
... * WARNING: Test: <test_enable_existing_feature(Admin::Api::AccountPlanFeaturesTest)> is pending.
.... ..... * WARNING: Test: <test_destroy_with_wrong_id(Admin::Api::ServicesTest)> is pending.
................. ... ... . * WARNING: Test: <test_show_with_wrong_id(Admin::Api::ServicesTest)> is pending.
... * WARNING: Test: <test_apis_can_be_behind_the_site_access_code(Admin::Api::AccountPlansTest)> is pending.
.. * WARNING: Test: <test_security_test_on_another_provider_plans(Admin::Api::ApplicationPlanFeaturesTest)> is pending.
. . ..... * WARNING: Test: <test_security_test_on_buyer_side_domain(Admin::Api::ApplicationPlanFeaturesTest)> is pending.
.... * WARNING: Test: <test_update_with_wrong_id(Admin::Api::ServicesTest)> is pending.
................. ..... .. * WARNING: Test: <test_hidden_plan_cannot_be_mark_as_default(Admin::Api::AccountPlansTest)> is pending.
........ * WARNING: Test: <test_destroy_with_wrong_id(Admin::Api::MetricsTest)> is pending.
... ...... * WARNING: Test: <test_index_returns_fields_defined(Admin::Api::AccountsTest)> is pending.
....  ........ * WARNING: Test: <test_show_with_wrong_id(Admin::Api::MetricsTest)> is pending.
... * WARNING: Test: <test_create_errors(Admin::Api::BuyersApplicationsTest)> is pending.
..... ...... * WARNING: Test: <test_update_errors_xml(Admin::Api::MetricsTest)> is pending.
. ........ * WARNING: Test: <test_update_with_wrong_id(Admin::Api::MetricsTest)> is pending.
.............C..  ....  * WARNING: Test: <test_create_errors_xml(EnterpriseApiFeaturesTest)> is pending.
.  * WARNING: Test: <test_index_returns_fields_defined(EnterpriseApiApplicationsTest)> is pending.
.... * WARNING: Test: <test_create_features_with_scope(EnterpriseApiFeaturesTest)> is pending.
.... * WARNING: Test: <test_customized_plan_one_does_nothing(Admin::Api::BuyersApplicationsTest)> is pending.
..........an't stop process, no PID found in tmp/pids/thin.pid
S.......... .. ... * WARNING: Test: <test_destroy_with_wrong_id(EnterpriseApiFeaturesTest)> is pending.
.....ending QUIT signal to process 31462 ... 
. .... * WARNING: Test: <test_index_returns_fields_defined(Admin::Api::BuyersApplicationsTest)> is pending.
.. * WARNING: Test: <test_api_signup_when_site_access_code_is_set(Admin::Api::SignupTest)> is pending.
... ..S. * WARNING: Test: <test_disable_non-existing_feature(EnterpriseApiServicePlanFeaturesTest)> is pending.
.  .. .. * WARNING: Test: <test_not_custom_one_does_nothing(Admin::Api::BuyersApplicationsTest)> is pending.
. . * WARNING: Test: <test_update_errors_xml(EnterpriseApiFeaturesTest)> is pending.
.  * WARNING: Test: <test_enable_existing_feature(EnterpriseApiServicePlanFeaturesTest)> is pending.
......... * WARNING: Test: <test_nothing_happens_on_already_accepted_one(Admin::Api::BuyersApplicationsTest)> is pending.
. .. * WARNING: Test: <test_update_with_wrong_id(EnterpriseApiFeaturesTest)> is pending.
......ending QUIT signal to process 31481 ... 
S * WARNING: Test: <test_nothing_happens_on_already_resumed_one(Admin::Api::BuyersApplicationsTest)> is pending.
.  ... * WARNING: Test: <test_index_returns_fields_defined(Admin::Api::BuyerUsersTest)> is pending.
..... * WARNING: Test: <test_nothing_happens_on_already_suspended_one(Admin::Api::BuyersApplicationsTest)> is pending.
.... .... * WARNING: Test: <test_security_test_on_another_provider_plans(EnterpriseApiServicePlanFeaturesTest)> is pending.
. .ending QUIT signal to process 31502 ... 
...... .. * WARNING: Test: <test_security_test_on_buyer_side_domain(EnterpriseApiServicePlanFeaturesTest)> is pending.
.... * WARNING: Test: <test_index_returns_fields_defined(Admin::Api::UsersTest)> is pending.
..S.........................ending QUIT signal to process 31587 ... 
S........
Finished in 53.091404 seconds.

43 tests, 215 assertions, 0 failures, 0 errors
.. ... * WARNING: Test: <test_show_returns_fields_defined(Admin::Api::UsersTest)> is pending.
....ending QUIT signal to process 31696 ... 
...........S.....................ending QUIT signal to process 31781 ... 
S... .......... * WARNING: Test: <test_hidden_plan_cannot_be_mark_as_default(Admin::Api::ServicePlansTest)> is pending.
... .ending QUIT signal to process 31802 ... 
.. * WARNING: Test: <test_create_errors_xml(EnterpriseApiProviderFeaturesTest)> is pending.
. .... * WARNING: Test: <test_create_features_with_scope_is_ignored(EnterpriseApiProviderFeaturesTest)> is pending.
.....S ..... * WARNING: Test: <test_destroy_with_wrong_id(EnterpriseApiProviderFeaturesTest)> is pending.
........... ...
Finished in 72.407202 seconds.

59 tests, 411 assertions, 0 failures, 0 errors
... * WARNING: Test: <test_update_errors_xml(EnterpriseApiProviderFeaturesTest)> is pending.
. .ending QUIT signal to process 31821 ... 
S....... * WARNING: Test: <test_update_with_wrong_id(EnterpriseApiProviderFeaturesTest)> is pending.
..
Finished in 75.625785 seconds.

56 tests, 192 assertions, 0 failures, 0 errors
...ending QUIT signal to process 31837 ... 
.......S............Eending QUIT signal to process 31856 ... 
S.............ending QUIT signal to process 31877 ... 
.......S....
Finished in 90.66205 seconds.

71 tests, 475 assertions, 0 failures, 0 errors
.......ending QUIT signal to process 31898 ... 
S...
Finished in 95.58463 seconds.

66 tests, 456 assertions, 0 failures, 0 errors
..ending QUIT signal to process 31920 ... 
...
Finished in 96.682901 seconds.

  1) Error:
test: application creation should be notified. (NotificationsTest):
NoMethodError: undefined method `bcc' for nil:NilClass
    test/integration/notifications_test.rb:184:in `__bind_1353323280_402990'
    shoulda (2.11.3) lib/shoulda/context.rb:382:in `call'
    shoulda (2.11.3) lib/shoulda/context.rb:382:in `test: application creation should be notified. '

80 tests, 335 assertions, 0 failures, 1 errors
.S...
Finished in 101.60046 seconds.

83 tests, 508 assertions, 0 failures, 0 errors
ending QUIT signal to process 31939 ... 
Sending QUIT signal to process 31982 ... 
.Sending QUIT signal to process 32090 ... 
Sending QUIT signal to process 32207 ... 
.Sending QUIT signal to process 32266 ... 
Sending QUIT signal to process 32303 ... 
>> Exiting!
.Sending QUIT signal to process 32322 ... 
Sending QUIT signal to process 32354 ... 
.Sending QUIT signal to process 32373 ... 
Sending QUIT signal to process 32394 ... 
.Sending QUIT signal to process 32421 ... 
Sending QUIT signal to process 32453 ... 
.Sending QUIT signal to process 32480 ... 
Sending QUIT signal to process 32567 ... 
.Sending QUIT signal to process 32630 ... 
Sending QUIT signal to process 32728 ... 
.Sending QUIT signal to process 301 ... 
Sending QUIT signal to process 336 ... 
.
Finished in 191.093019 seconds.

34 tests, 177 assertions, 0 failures, 0 errors
Tests Failed

2769 assertions, 1 error, 0 failures, 492 tests

Took 206.608883 seconds
** Erubis 2.7.0
8 processes for 230 features, ~ 28 features per process
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.

NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
UUUUUUUUsing the default profile...
*[WARN] S3 storage is not enabled.
sing the default profile...
*sing the default profile...
*[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
sing the default profile...
*sing the default profile...
*sing the default profile...
*sing the default profile...
*sing the default profile...
*[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
* Erubis 2.7.0
.* Erubis 2.7.0
.* Erubis 2.7.0
.* Erubis 2.7.0
........* Erubis 2.7.0
.* Erubis 2.7.0
....* Erubis 2.7.0
.* Erubis 2.7.0
.................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....................................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/accounts/invitations.feature/22.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/accounts/invitations.feature/22.txt
..............................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/accounts/invitations.feature/37.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/accounts/invitations.feature/37.txt
............................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
................................................................F--
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api/end_users.feature/18.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api/end_users.feature/18.txt
......F------....................................................--..........F-----...............NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................................---..................F----.............................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................................................F--.....................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:342:in `assert_not_equal'
....................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.....................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....................F--------
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/access_details.feature/64.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/access_details.feature/64.txt
...................................................................................................F--
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/23.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/23.txt
....................................................................F--------......................................................................-
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/37.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/37.txt
.......................................F--
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/18.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/18.txt
........................................................................................................................................F-
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/41.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/41.txt
.....................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
...........................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/50.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature/50.txt
......................................................F--
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/76.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/extra_fields.feature/76.txt
.....................................................................................................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api_docs/account_data.feature/13.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api_docs/account_data.feature/13.txt
......................................................................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api_docs/account_data.feature/17.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/api_docs/account_data.feature/17.txt
.......................--------..................................................................------..............................................................................................................................................................................................................................-------............................................................................F------
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/67.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/67.txt
...........F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/search.feature/26.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/search.feature/26.txt
.............................F-
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/referrer_filters.feature/17.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/referrer_filters.feature/17.txt
..................................................................F-
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/referrer_filters.feature/26.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/referrer_filters.feature/26.txt
.....F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/search.feature/40.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/search.feature/40.txt
.........................................................F----
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/111.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/111.txt
.........------.......-...........................----..F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/managing.feature/105.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/providers/managing.feature/105.txt
............-------............F---.......................................------------
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/136.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/136.txt
.-......................................................-.....................................................------................................F-----...................................
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/217.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/applications/buyers/application_management.feature/217.txt
.................................--------............NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
...............NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................-..F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/buyers/invitations/for_admins.feature/29.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/buyers/invitations/for_admins.feature/29.txt
..F----
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/buyers/signup_single_cinstance.feature/14.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/buyers/signup_single_cinstance.feature/14.txt
...............................................--------...-----.......................................................................................-------.....................................................................------...................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.....................------..........................................................................................F-............................................................F----.................................-------.---.................-------.......................F-.......................................................................................................................................................---------....................................-------............................................................................................................---------....................................................................................F---------..........................F----------...................................---............F--------.............DEPRECATION WARNING: This step is deprecated. You have to specify which plan (application, service, account) to buy. (called from /var/lib/jenkins/jobs/michal/workspace/features/step_definitions/buyer_steps.rb:28)
...................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................................................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/account_activation_emails.feature/12.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/account_activation_emails.feature/12.txt
...............................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..........NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..............................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.........................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.............................................F.NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......................................................................-------.....NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......---.............NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
...........................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................
.......
(::) failed steps (::)

expected there to be content "Referrer Filters" in "\n    \n      \n        \n\n\n\n      \n\n\n        \n    bob\n\n      Dashboard\n    | Account\n    | Logout\n\n\n      \n\n      \n        Manage Menu Links\nWant help?\nActive Docs\nGive me my API keys now!\n\n  Forum\n\n      \n        \n            Search\n          \n        \n      \n\n      \n        \n  \n  \n\n\n\n  jQuery(document).ready(function(){\n    setTimeout($.flash.hide, 5000);\n  });\n\n  Your application is awaiting approval. This can take a little time - you will be notified by email.\nApplication: MegaWidget\n\n\n  Blah blah\n\n\n\n    \n\n  Application ID\n  This is the application ID, you should send with each API request.\n  08447d0b\n\n\n  Application Keys\n\n  These are application keys used to authenticate requests.\n  \n        Create new key\n\n        At most 5 keys are allowed.\n  \n\n  \n\n\n\n  \n    Properties\n    State\n        pending\n      NameMegaWidgetDescriptionBlah blah\n      Edit\n    \n  \n\n  \n    \n      Plan: Default\n      \n        (Review/Change)\n        \n//<![CDATA[\n  $(document).ready(function(){\n\n    function updateForm(name, planID){\n      $('#selected-plan em').text(name);\n      $('input#cinstance_plan_id').val(planID);\n    }\n\n    $(\"#choose-plan-94\").click(function(){\n        var planID = '144';\n        PlanWidget.loadPreview(planID, updateForm, '/admin/services/45/plans_widget', '94' );\n      return false;\n    });\n  });\n\n//]]>\n\n    \n\n    To extend your limits please contact us.\n  \n\n\n\n\n\n        \n\n  Dashboard\n\n    Overview\n\n        Applications\n\n\n    Messages\n\n  \n      \n\n      © 2012\n        \n      \n  " (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/web_steps.rb:119
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:117:in `/^(?:|I )should see "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:26:in `Then I should see "Referrer Filters"'

Unable to find css "#referrer_filters" (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `find'
./features/step_definitions/applications/referrer_filters_steps.rb:76:in `/^I submit the new referrer filter form with "([^"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:47:in `And I submit the new referrer filter form with ""'

Failed assertion, no message given. (MiniTest::Assertion)
./features/step_definitions/applications/referrer_filters_steps.rb:106:in `/^the new referrer filter form should be hidden$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:54:in `Then the new referrer filter form should be hidden'

Unable to find css "#referrer_filters" (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `find'
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:117:in `/^(?:|I )should see "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/providers/referrer_filters.feature:23:in `Then I should see referrer filter "foo.example.org"'

Unable to find css "#referrer_filters" (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `find'
./features/step_definitions/applications/referrer_filters_steps.rb:76:in `/^I submit the new referrer filter form with "([^"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/providers/referrer_filters.feature:31:in `And I submit the new referrer filter form with "foo.example.org"'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/prepaid.feature:38:in `And buyer "zoidberg" makes 1 service transactions with:'

Could not find email With subject "Foo.example.com api account activation". 
 Found the following emails:

  (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/email_steps.rb:67:in `/^(?:I|they|"([^"]*?)") opens? the email with subject "([^"]*?)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/signup/account_activation_emails.feature:15:in `Then "user@example.com" should receive the default account activation email'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:18 # Scenario: List referrer filters
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:41 # Scenario: Create invalid referrer filter
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/referrer_filters/buyer_side_multiple_applications.feature:50 # Scenario: The add new referrer filter form is hidden when the limit is reached
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/providers/referrer_filters.feature:17 # Scenario: List referrer filters
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/providers/referrer_filters.feature:26 # Scenario: Create a referrer filter
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/prepaid.feature:32 # Scenario: Prepaid and variable billing
cucumber /var/lib/jenkins/jobs/michal/workspace/features/signup/account_activation_emails.feature:12 # Scenario: Default account activation email in use

60 scenarios (7 failed, 53 passed)
671 steps (7 failed, 13 skipped, 651 passed)
3m39.681s
.....NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.........................F---------............NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
...................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................-.....................------............................................................---.............................---....................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..-----------...........................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....................F--------...................F-...NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..............----...........................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
............F-------....................................

(::) failed steps (::)

No email for .
<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/step_definitions/activation_steps.rb:6:in `/^I follow the activation link in an email sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/activation.feature:11:in `When I follow the activation link in an email sent to user "alice"'

expected: 1,
     got: 0 (using ==) (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/email_steps.rb:50:in `/^(?:I|they|"([^"]*?)") should receive (an|no|\d+) emails? with subject "([^"]*?)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/forums/subscriptions.feature:49:in `Then the user "foo.example.com" should receive an email notifying of the new post'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/activation.feature:9 # Scenario: Activation with valid activation token
cucumber /var/lib/jenkins/jobs/michal/workspace/features/forums/subscriptions.feature:46 # Scenario: Active user subscribed to topic receives email on new posts in topic

76 scenarios (2 failed, 74 passed)
849 steps (2 failed, 2 skipped, 845 passed)
4m14.631s
...F-----------....NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
-......--------......-----.............-----.........................F----...............................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................
........
(::) failed steps (::)

no link with title, id or text 'Create a new application' found (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `click_link'
./features/step_definitions/web_steps.rb:35
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:34:in `/^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/access_details.feature:75:in `And I follow "Create a new application"'

You are not authorized to access this page. (CanCan::AccessDenied)
./app/controllers/admin/services_controller.rb:11:in `authorize_services'
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/benchmark.rb:308:in `realtime'
./lib/three_scale/middleware/multitenant.rb:116:in `_call'
./lib/three_scale/middleware/multitenant.rb:111:in `call'
./features/step_definitions/web_steps.rb:24:in `/^(?:|I )go to (.+)$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:25:in `And I go to the new application page'

You are not authorized to access this page. (CanCan::AccessDenied)
./app/controllers/admin/services_controller.rb:11:in `authorize_services'
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/benchmark.rb:308:in `realtime'
./lib/three_scale/middleware/multitenant.rb:116:in `_call'
./lib/three_scale/middleware/multitenant.rb:111:in `call'
./features/step_definitions/web_steps.rb:24:in `/^(?:|I )go to (.+)$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:39:in `When I go to the new application page'

You are not authorized to access this page. (CanCan::AccessDenied)
./app/controllers/admin/services_controller.rb:11:in `authorize_services'
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/benchmark.rb:308:in `realtime'
./lib/three_scale/middleware/multitenant.rb:116:in `_call'
./lib/three_scale/middleware/multitenant.rb:111:in `call'
./features/step_definitions/web_steps.rb:24:in `/^(?:|I )go to (.+)$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:79:in `When I go to the new application page'

element size differs (1 should be 6) (IndexError)
./features/step_definitions/table_steps.rb:7:in `/^I should see following table:$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/providers/search.feature:36:in `Then I should see following table:'

element size differs (1 should be 6) (IndexError)
./features/step_definitions/table_steps.rb:7:in `/^I should see following table:$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/providers/search.feature:51:in `Then I should see following table:'

No email for .
<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/step_definitions/activation_steps.rb:6:in `/^I follow the activation link in an email sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/buyers/signup_single_cinstance.feature:25:in `When I follow the activation link in an email sent to "hugo@stuff.com"'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/access_details.feature:64 # Scenario: Backend oauth, multiple applications mode
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:23 # Scenario: Hidden and not editable extra fields should not be editable
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:37 # Scenario: Create an application with extra fields
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/extra_fields.feature:76 # Scenario: Extra fields are sorted by position
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/providers/search.feature:26 # Scenario: Search
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/providers/search.feature:40 # Scenario: Search scoped by service
cucumber /var/lib/jenkins/jobs/michal/workspace/features/buyers/signup_single_cinstance.feature:14 # Scenario: Signup, activate and login

72 scenarios (7 failed, 65 passed)
845 steps (7 failed, 25 skipped, 813 passed)
4m35.711s
.............................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..........................................F
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/services/subscriptions/search.feature/23.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/services/subscriptions/search.feature/23.txt
................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..................-...............................---......................................................................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
....................

(::) failed steps (::)

expected: {"results"=>{"app_keys"=>[{"name"=>"CuteWidget", "value"=>""}], "user_keys"=>[{"name"=>"CuteWidget", "value"=>"e89bf2c1ec0780bb710174c21f981978"}], "app_ids"=>[{"name"=>"CuteWidget", "value"=>"cede5937"}]}, "status"=>200},
     got: {"results"=>{"app_keys"=>[], "user_keys"=>[], "app_ids"=>[]}, "status"=>200} (using ==)
Diff:
@@ -1,7 +1,2 @@
-{"results"=>
-  {"app_keys"=>[{"name"=>"CuteWidget", "value"=>""}],
-   "user_keys"=>
-    [{"name"=>"CuteWidget", "value"=>"e89bf2c1ec0780bb710174c21f981978"}],
-   "app_ids"=>[{"name"=>"CuteWidget", "value"=>"cede5937"}]},
- "status"=>200}
+{"results"=>{"app_keys"=>[], "user_keys"=>[], "app_ids"=>[]}, "status"=>200}
 (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/api_docs_step.rb:56:in `/^"([^"]*)" should have access to useful account data$/'
/var/lib/jenkins/jobs/michal/workspace/features/api_docs/account_data.feature:15:in `Then "alice" should have access to useful account data'

expected: {"results"=>{"app_keys"=>[{"name"=>"CuteWidget", "value"=>""}], "application_ids"=>[{"name"=>"CuteWidget", "value"=>192}], "user_keys"=>[{"name"=>"CuteWidget", "value"=>"399d6adc7b90efdc3fde1f5bf1183f18"}], "app_ids"=>[{"name"=>"CuteWidget", "value"=>"df8c3b78"}], "application_plan_ids"=>[{"name"=>"Default", "value"=>276}], "metric_ids"=>[{"name"=>"Hits", "value"=>125}], "account_ids"=>[{"name"=>"alice", "value"=>139}], "metric_names"=>[{"name"=>"Hits", "value"=>"hits"}], "service_plan_ids"=>[{"name"=>"Default", "value"=>274}], "service_ids"=>[{"name"=>"API", "value"=>110}], "account_plan_ids"=>[{"name"=>"plan19", "value"=>275}], "user_ids"=>[{"name"=>"alice", "value"=>139}], "admin_ids"=>[{"name"=>"foo.example.com", "value"=>138}], "api_keys"=>[{"name"=>"API Key", "value"=>"5c66c6e11a3072d26689a50c32f65bbe"}]}, "status"=>200},
     got: {"results"=>{"app_keys"=>[], "application_ids"=>[], "user_keys"=>[], "app_ids"=>[], "application_plan_ids"=>[{"name"=>"Default", "value"=>276}], "metric_ids"=>[{"name"=>"Hits", "value"=>125}], "account_ids"=>[{"name"=>"alice", "value"=>139}], "metric_names"=>[{"name"=>"Hits", "value"=>"hits"}], "service_plan_ids"=>[{"name"=>"Default", "value"=>274}], "service_ids"=>[{"name"=>"API", "value"=>110}], "account_plan_ids"=>[{"name"=>"plan19", "value"=>275}], "user_ids"=>[{"name"=>"alice", "value"=>139}], "admin_ids"=>[{"name"=>"foo.example.com", "value"=>138}], "api_keys"=>[{"name"=>"API Key", "value"=>"5c66c6e11a3072d26689a50c32f65bbe"}]}, "status"=>200} (using ==)
Diff:
@@ -1,9 +1,8 @@
 {"results"=>
-  {"app_keys"=>[{"name"=>"CuteWidget", "value"=>""}],
-   "application_ids"=>[{"name"=>"CuteWidget", "value"=>192}],
-   "user_keys"=>
-    [{"name"=>"CuteWidget", "value"=>"399d6adc7b90efdc3fde1f5bf1183f18"}],
-   "app_ids"=>[{"name"=>"CuteWidget", "value"=>"df8c3b78"}],
+  {"app_keys"=>[],
+   "application_ids"=>[],
+   "user_keys"=>[],
+   "app_ids"=>[],
    "application_plan_ids"=>[{"name"=>"Default", "value"=>276}],
    "metric_ids"=>[{"name"=>"Hits", "value"=>125}],
    "account_ids"=>[{"name"=>"alice", "value"=>139}],
 (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/api_docs_step.rb:36:in `/^provider "([^"]*)" should have access to useful account data$/'
/var/lib/jenkins/jobs/michal/workspace/features/api_docs/account_data.feature:20:in `Then provider "foo.example.com" should have access to useful account data'

<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/support/invitation_emails_helper.rb:4:in `invitation_message_should_be_valid'
./features/step_definitions/invitations_steps.rb:101:in `/^"([^"]*)" should receive an invitation to (account "[^"]*")$/'
/var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/for_admins.feature:32:in `Then "new@lolcats.net" should receive an invitation to account "lol cats"'

Could not find email  . 
 Found the following emails:

 Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:26 +0100
From: apisupport@3scale.net
Bcc: foo144@example.net
Subject: API System: New Account Signup
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Message Notification"}

Dear API Administrator,

A new user lol_cats has signed up. The user's details are:

* Name: 
* Email address: foo145@example.net
* Organization: lol cats
* Telephone: 



The API Team
Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:26 +0100
From: apisupport@3scale.net
To: foo145@example.net
Subject: Waiting list confirmation
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Account confirmed"}

Dear lol_cats,

This email is to confirm that we have received your registration request for access to foo.example.com's API.

You will receive another email once we have approved your account.

Thank you for your interest, and we hope to be in touch again shortly.

Sincerely,
The foo.example.com API Team
 (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:19:in `When I follow the link to signup in the invitation sent to "bob@foo.example.com"'

Could not find email  . 
 Found the following emails:

 Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:33 +0100
From: apisupport@3scale.net
Bcc: foo152@example.net
Subject: API System: New Account Signup
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Message Notification"}

Dear API Administrator,

A new user lol_cats has signed up. The user's details are:

* Name: 
* Email address: foo153@example.net
* Organization: lol cats
* Telephone: 



The API Team
Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:33 +0100
From: apisupport@3scale.net
To: foo153@example.net
Subject: Waiting list confirmation
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Account confirmed"}

Dear lol_cats,

This email is to confirm that we have received your registration request for access to foo.example.com's API.

You will receive another email once we have approved your account.

Thank you for your interest, and we hope to be in touch again shortly.

Sincerely,
The foo.example.com API Team
 (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:37:in `When I follow the link to signup in the invitation sent to "bob@foo.example.com"'

Could not find email  . 
 Found the following emails:

 Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:36 +0100
From: apisupport@3scale.net
Bcc: foo156@example.net
Subject: API System: New Account Signup
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Message Notification"}

Dear API Administrator,

A new user lol_cats has signed up. The user's details are:

* Name: 
* Email address: foo157@example.net
* Organization: lol cats
* Telephone: 



The API Team
Return-Path: <apisupport@3scale.net>
Date: Mon, 19 Nov 2012 12:12:36 +0100
From: apisupport@3scale.net
To: foo157@example.net
Subject: Waiting list confirmation
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-Smtpapi: {"category": "Account confirmed"}

Dear lol_cats,

This email is to confirm that we have received your registration request for access to foo.example.com's API.

You will receive another email once we have approved your account.

Thank you for your interest, and we hope to be in touch again shortly.

Sincerely,
The foo.example.com API Team
 (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:51:in `When I follow the link to signup in the invitation sent to "alice@lolcats.com"'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/api_docs/account_data.feature:13 # Scenario: JSON description of useful account data for buyer
cucumber /var/lib/jenkins/jobs/michal/workspace/features/api_docs/account_data.feature:17 # Scenario: JSON description of useful account data for provider
cucumber /var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/for_admins.feature:29 # Scenario: Sending an invitation for a partner account
cucumber /var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:16 # Scenario: Invitations sign up pages are accessible without being logged in
cucumber /var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:31 # Scenario: Invitations signup process (uses extra fields)
cucumber /var/lib/jenkins/jobs/michal/workspace/features/buyers/invitations/invitation.feature:49 # Scenario: Invitations are valid only once

77 scenarios (6 failed, 71 passed)
888 steps (6 failed, 9 skipped, 873 passed)
5m6.361s
.F-------
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/multiple_cinstances.feature/16.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/multiple_cinstances.feature/16.txt
.......................

(::) failed steps (::)

Tables were not identical (Cucumber::Ast::Table::Different)
./features/step_definitions/table_steps.rb:7:in `/^I should see following table:$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/providers/managing.feature:112:in `Then I should see following table:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/free_trial.feature:20:in `And buyer "zoidberg" makes 5 service transaction with:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/free_trial.feature:51:in `And buyer "zoidberg" makes 5 service transaction with:'

element size differs (1 should be 6) (IndexError)
./features/step_definitions/table_steps.rb:7:in `/^I should see following table:$/'
/var/lib/jenkins/jobs/michal/workspace/features/services/subscriptions/search.feature:29:in `Then I should see following table:'

No email for .
<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/step_definitions/activation_steps.rb:6:in `/^I follow the activation link in an email sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/signup/multiple_cinstances.feature:28:in `When I follow the activation link in an email sent to "hugo@stuff.com"'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/providers/managing.feature:105 # Scenario: List all applications of buyer
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/free_trial.feature:12 # Scenario: I have to pay monthly and setup fee when the trial is over
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/free_trial.feature:40 # Scenario: I have to pay variable fees only for transactions that happen after trial
cucumber /var/lib/jenkins/jobs/michal/workspace/features/services/subscriptions/search.feature:23 # Scenario: Search
cucumber /var/lib/jenkins/jobs/michal/workspace/features/signup/multiple_cinstances.feature:16 # Scenario: Signup, activate, approve and login

88 scenarios (5 failed, 83 passed)
1032 steps (5 failed, 29 skipped, 998 passed)
5m7.561s
.................................................................................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.....................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......................................................

(::) failed steps (::)

<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/support/invitation_emails_helper.rb:4:in `invitation_message_should_be_valid'
./features/step_definitions/invitations_steps.rb:105:in `/^an invitation with the admin domain of (account "[^\"]*") should be sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:27:in `Then an invitation with the admin domain of account "foo.example.com" should be sent to "alice@foo.example.com"'

<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/support/invitation_emails_helper.rb:4:in `invitation_message_should_be_valid'
./features/step_definitions/invitations_steps.rb:101:in `/^"([^"]*)" should receive an invitation to (account "[^"]*")$/'
/var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:46:in `Then invitation from account "apininja" should be sent to "alice@foo.example.com"'

Could not find email  . 
 Found the following emails:

  (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:77:in `When I follow the link to signup in the invitation sent to "alice@foo.example.com"'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/plan_change.feature:96:in `And buyer "stallman" makes 1 service transaction with:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:23:in `When buyer "broke" makes 5 service transaction with:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:43:in `And buyer "varnish" makes 1 service transactions with:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:71:in `And buyer "tycoon" makes 2 service transactions with:'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:111:in `And buyer "tycoon" makes 2 service transactions with:'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:22 # Scenario: Sending an invitation as provider
cucumber /var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:37 # Scenario: Sending an invitation as buyer
cucumber /var/lib/jenkins/jobs/michal/workspace/features/accounts/invitations.feature:75 # Scenario: Accepting an invitation
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/plan_change.feature:83 # Scenario: Change on trial causes no billing
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:18 # Scenario: With free plan, no invoice is created
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:36 # Scenario: Variable only
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:66 # Scenario: Bill fixed fee in the beginning, variable in the end of the month
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/postpaid.feature:105 # Scenario: Buyer is not billed monthly - no invoice is created

92 scenarios (8 failed, 84 passed)
1259 steps (8 failed, 44 skipped, 1207 passed)
5m37.819s
...................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..............................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......................F------
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/buyers.feature/16.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/signup/buyers.feature/16.txt
......................................................F---
Saved page body to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/stats/buyer_side.feature/16.html

Saved exception with backtrace to /var/lib/jenkins/jobs/michal/workspace/tmp/capybara/features/stats/buyer_side.feature/16.txt


(::) failed steps (::)

no link with title, id or text 'Create a new application' found (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `click_link'
./features/step_definitions/web_steps.rb:35
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:34:in `/^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:74:in `And I follow "Create a new application"'

no link with title, id or text 'Create a new application' found (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `click_link'
./features/step_definitions/web_steps.rb:35
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:34:in `/^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:115:in `And I follow "Create a new application"'

Field App extra required is not required (MiniTest::Assertion)
./features/step_definitions/fields_steps.rb:3
./features/step_definitions/fields_steps.rb:2:in `each'
./features/step_definitions/fields_steps.rb:2:in `/^fields should be required:$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:146:in `Then fields should be required:'

no link with title, id or text 'Create a new application' found (Capybara::ElementNotFound)
(eval):2:in `send'
(eval):2:in `click_link'
./features/step_definitions/web_steps.rb:35
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:34:in `/^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:230:in `And I follow "Create a new application"'

expected there to be content "Stats" in "Dashboard\n\n    Overview\n\n        API Access Details\n\n          Change Plan\n          \n//<![CDATA[\n  $(document).ready(function(){\n\n    function updateForm(name, planID){\n      $('#selected-plan em').text(name);\n      $('input#cinstance_plan_id').val(planID);\n    }\n\n    $(\"#menu-choose-plan-686\").click(function(){\n        var planID = '937';\n        PlanWidget.loadPreview(planID, updateForm, '/admin/services/326/plans_widget', '686' );\n      return false;\n    });\n  });\n\n//]]>\nMessages\n\n  " (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/web_steps.rb:119
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:117:in `/^(?:|I )should see "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/stats/buyer_side.feature:22:in `Then I should see "Stats" in the buyers submenu'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:67 # Scenario: Cannot select a plan when creating a new application
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:111 # Scenario: Create an application that requires approval
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:136 # Scenario: Application creation with fields
cucumber /var/lib/jenkins/jobs/michal/workspace/features/applications/buyers/application_management.feature:217 # Scenario: Choose service when subscribed to many
cucumber /var/lib/jenkins/jobs/michal/workspace/features/stats/buyer_side.feature:16 # Scenario: Access stats page

85 scenarios (5 failed, 80 passed)
1061 steps (5 failed, 28 skipped, 1028 passed)
6m20.826s
..........................................................F-------------....F--.......................................

(::) failed steps (::)

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id (RuntimeError)
./app/models/end_user.rb:18:in `find'
./app/models/end_user.rb:157:in `uniqueness_of_username'
./app/controllers/api/end_users_controller.rb:32:in `create'
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/benchmark.rb:308:in `realtime'
./lib/three_scale/middleware/multitenant.rb:116:in `_call'
./lib/three_scale/middleware/multitenant.rb:111:in `call'
(eval):2:in `send'
(eval):2:in `click_button'
./features/step_definitions/web_steps.rb:29
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:28:in `/^(?:|I )press "([^"]*)"(?: within "([^"]*)")?$/'
/var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:23:in `And I press "Create End User"'

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id (RuntimeError)
./app/models/end_user.rb:18:in `find'
./app/models/end_user.rb:157:in `uniqueness_of_username'
./app/models/end_user.rb:25:in `create'
./features/step_definitions/api/end_user_steps.rb:2:in `/^(provider "[^\"]*") has end user "([^\"]*)" on service "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:28:in `Given provider "foo.example.com" has end user "uuid-of-the-end-user" on service "API"'

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id (RuntimeError)
./app/models/end_user.rb:18:in `find'
./app/models/end_user.rb:157:in `uniqueness_of_username'
./app/models/end_user.rb:25:in `create'
./features/step_definitions/api/end_user_steps.rb:2:in `/^(provider "[^\"]*") has end user "([^\"]*)" on service "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:48:in `Given provider "foo.example.com" has end user "uuid-of-the-end-user" on service "API"'

contract is not active (Backend::ContractNotActive)
./app/models/backend/cinstance_data.rb:46:in `validate_state!'
./app/models/backend/transaction.rb:63:in `report!'
./app/models/backend/transaction.rb:35:in `report!'
./features/step_definitions/transaction_steps.rb:14
./features/step_definitions/transaction_steps.rb:13:in `times'
./features/step_definitions/transaction_steps.rb:13:in `/^buyer "([^\"]*)" makes (\d+|a) service transactions? with:$/'
/var/lib/jenkins/jobs/michal/workspace/features/finance/all_contracts.feature:21:in `When buyer "not_very_rich" makes 3 service transactions with:'

No email for .
<nil> expected to not be nil..
Expected block to return true value. (MiniTest::Assertion)
/var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
./features/step_definitions/activation_steps.rb:6:in `/^I follow the activation link in an email sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/signup/buyers.feature:27:in `When I follow the activation link in an email sent to "hugo@example.com"'

Could not find email  . 
 Found the following emails:

  (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/signup/with_invitation.feature:13:in `And I follow the link to signup in the invitation sent to "bob@foo.example.com"'

Could not find email  . 
 Found the following emails:

  (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/invitations_steps.rb:24:in `/^I follow the link to signup in the invitation sent to "([^\"]*)"$/'
/var/lib/jenkins/jobs/michal/workspace/features/signup/with_invitation.feature:32:in `And I follow the link to signup in the invitation sent to "bob@foo.example.com"'

Failing Scenarios:
cucumber /var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:18 # Scenario: Create new end user
cucumber /var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:27 # Scenario: Search for End User
cucumber /var/lib/jenkins/jobs/michal/workspace/features/api/end_users.feature:47 # Scenario: Change plan of End User
cucumber /var/lib/jenkins/jobs/michal/workspace/features/finance/all_contracts.feature:12 # Scenario: Monthly fee on all levels (account, service and application plan)
cucumber /var/lib/jenkins/jobs/michal/workspace/features/signup/buyers.feature:16 # Scenario: (Enterprise, Single App Mode) Plain signup, activate and login
cucumber /var/lib/jenkins/jobs/michal/workspace/features/signup/with_invitation.feature:10 # Scenario: Receiving an invitation, signing up and signing in
cucumber /var/lib/jenkins/jobs/michal/workspace/features/signup/with_invitation.feature:29 # Scenario: Provider invitation is in his admin domain

119 scenarios (7 failed, 112 passed)
1408 steps (7 failed, 48 skipped, 1353 passed)
6m50.428s
Features Failed

94 faileds, 8390 passeds, 669 scenarios, 198 skippeds, 8013 steps

Took 428.148317 seconds
** Erubis 2.7.0
Using recorded test runtime
8 processes for 230 features, ~ 28 features per process
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /var/lib/jenkins/.rvm/gems/ree-1.8.7-2012.01/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
UUUUUUUUsing the default profile...
*[WARN] S3 storage is not enabled.
sing the default profile...
*sing the default profile...
*[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
sing the default profile...
*sing the default profile...
*sing the default profile...
*sing the default profile...
*sing the default profile...
*[WARN] S3 storage is not enabled.[WARN] S3 storage is not enabled.

[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
[WARN] S3 storage is not enabled.
* Erubis 2.7.0
.* Erubis 2.7.0
...* Erubis 2.7.0
.* Erubis 2.7.0
.* Erubis 2.7.0
.* Erubis 2.7.0
.....* Erubis 2.7.0
.* Erubis 2.7.0
.............................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..............................................................................................................ALERT: Request failed - error
undefined|0|
..................................................................................................ALERT: Request failed - error
undefined|0|
....................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..........NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..........................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
........................................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..............................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......................................................................................................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.............................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:342:in `assert_not_equal'
................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:342:in `assert_not_equal'
...............................................

8 scenarios (8 passed)
133 steps (133 passed)
1m10.414s
...........................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
................................................................................................................................................................
......
9 scenarios (9 passed)
150 steps (150 passed)
1m25.077s
...............................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.................................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.........................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
..................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
......................................................................................
......
15 scenarios (15 passed)
226 steps (226 passed)
1m55.369s
..........
...........
13 scenarios (13 passed)
196 steps (196 passed)
1m56.723s


14 scenarios (14 passed)
181 steps (181 passed)
1m58.646s
..............................................................

15 scenarios (15 passed)
218 steps (218 passed)
2m6.373s
...................................................

14 scenarios (14 passed)
231 steps (231 passed)
2m20.679s
.................................................................................NOTE: MiniTest::Unit::TestCase#assert_block is deprecated, use assert. It will be removed on 2013-01-01. Called from /var/lib/jenkins/.rvm/rubies/ree-1.8.7-2012.01/lib/ruby/1.8/test/unit/assertions.rb:354:in `assert_not_nil'
.......................................

22 scenarios (22 passed)
342 steps (342 passed)
3m28.074s

1787 passeds, 110 scenarios, 1677 steps

Took 225.230108 seconds
Build step 'Execute shell' marked build as failure
IRC notifier plugin: Sending notification to: #jenkins
Finished: FAILURE
